{{ $currURL := .Meta.CurrentURL }}
{{ $addURL := .Meta.AddURL }}

<div class="flex justify-between items-center mb-5">
  <h2 class="text-4xl font-bold dark:text-white text-center"><small>{{ .Title }}</small></h2>

  <div class="flex items-center">
    <a class="-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
      href="{{ $addURL }}">
      Add
    </a>

    <button class="ml-1 focus:outline-none text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
      id="toggle-editing">
      Edit
    </button>
  </div>
</div>
{{ if .Content }}
<ul>
  {{ range .Content }}
  <li class="[&:not(:last-child)]:border-b border-gray-700">
    <details class="group">
      <summary class="flex justify-between items-center gap-3 px-4 py-3 marker:content-none hover:cursor-pointer">
        <span class="text-xl font-bold dark:text-white hover-pointer">{{ .LangName }} <small>({{ .LangCode }})</small></span>
        <svg class="w-5 h-5 text-gray-500 transition group-open:rotate-90" xmlns="http://www.w3.org/2000/svg"
            width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z">
            </path>
        </svg>

        <div class="flex items-center editing hidden">
          <a class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"
            href="{{ $currURL }}/edit/{{ .LangCode }}">
            Edit
          </a>
          <button class="ml-1 focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"
            hx-delete="{{ $currURL }}/{{ .LangCode }}" hx-confirm="Are you sure you wish to delete '{{ .LangCode }}' locale?">
            Delete
          </button>
        </div>
      </summary>
      <pre class="mt-3"><code class="language-json rounded-lg" lang-code="{{ .LangCode }}">{{ .ContentJson }}</code></pre>
    </details>
    <!-- <hr class="h-px my-8 bg-gray-200 border-0 dark:bg-gray-700"> -->
  </li>
  {{ end }}
</ul>

<script>
  // Toggle button to show/hide edit and delete buttons
  document.getElementById('toggle-editing').addEventListener('click', function() {
    // find all editing elements
    const buttonGroups = document.querySelectorAll('.editing');
    // toggle the 'hidden' class for each of them
    buttonGroups.forEach(group => {
      group.classList.toggle('hidden');
    });
  });
</script>
<script>hljs.highlightAll();</script>
{{ else }}
<span class="font-bold">No {{ .Title }} Available</span>
{{ end }}